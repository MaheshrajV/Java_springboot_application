<!DOCTYPE html>
<html>
<head>
    <title>Employee Manager</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        form { margin-bottom: 20px; }
        input, button { padding: 8px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Employee Manager</h1>

    <!-- Add Employee Form -->
    <form id="employeeForm">
        <input type="text" id="name" placeholder="Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="text" id="position" placeholder="Position" required>
        <input type="number" id="salary" placeholder="Salary" required>
        <button type="submit">Add Employee</button>
    </form>

    <!-- Employee Table -->
    <table id="employeeTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Position</th>
                <th>Salary</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        const apiBase = '/records';

        // Fetch and display employees
        async function loadEmployees() {
            const res = await fetch(apiBase);
            const employees = await res.json();
            const tbody = document.querySelector('#employeeTable tbody');
            tbody.innerHTML = '';
            employees.forEach(emp => {
                const row = `
                    <tr>
                        <td>${emp.id}</td>
                        <td>${emp.name}</td>
                        <td>${emp.email}</td>
                        <td>${emp.position}</td>
                        <td>${emp.salary}</td>
                        <td><button onclick="deleteEmployee(${emp.id})">Delete</button></td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // Add employee
        document.getElementById('employeeForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const employee = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                position: document.getElementById('position').value,
                salary: parseFloat(document.getElementById('salary').value)
            };
            await fetch(apiBase, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(employee)
            });
            e.target.reset();
            loadEmployees();
        });

        // Delete employee
        async function deleteEmployee(id) {
            await fetch(`${apiBase}/${id}`, { method: 'DELETE' });
            loadEmployees();
        }

        // Initial load
        loadEmployees();
    </script>
</body>
</html>
